<html><head><style>body {
   color: black;
}
</style></head><body><h1 id="external-api-documentation">External API Documentation</h1>
<blockquote>
<p><strong>⚠️ IMPORTANT - DRAFT VERSION</strong></p>
<p>This is a draft version of the External API documentation. Please note:</p>
<ul>
<li>Fields may be added or removed in the final version</li>
<li>All URLs are draft/placeholder - actual URLs will be provided later</li>
<li>API endpoints and response structures are subject to change</li>
<li>This documentation is for integration planning purposes only</li>
</ul>
</blockquote>
<h2 id="table-of-contents">Table of Contents</h2>
<ol>
<li><a href="#1-initiate-loan-application">Initiate loan application</a></li>
<li><a href="#2-get-auth-token-endpoint">Get auth token endpoint</a></li>
<li><a href="#3-loan-applications-endpoints">Loan applications endpoints</a></li>
<li><a href="#4-decision-endpoints">Decision endpoints</a></li>
</ol>
<h1 id="1-initiate-loan-application">1. Initiate loan application</h1>
<h2 id="1-1-overview">1.1. Overview</h2>
<p>After a loan application is assigned to a partner, the user will be redirected to the partner&#39;s system via the Partner System Link configured in the product settings within our platform.</p>
<h2 id="1-2-redirect-url-format">1.2. Redirect URL Format</h2>
<pre><code><span class="hljs-symbol">https:</span><span class="hljs-comment">//partner.com/path?merchant_id={merchant_uuid}&amp;loan_application_id={loan_application_uuid}</span>
</code></pre><p><strong>Query Parameters:</strong></p>
<ul>
<li><code>merchant_id</code>: Secure UUID identifying the merchant in our system (e.g., <code>f47ac10b-58cc-4372-a567-0e02b2c3d479</code>)</li>
<li><code>loan_application_id</code>: Secure UUID identifying the loan application in our system (e.g., <code>e9b2d8c4-1a3f-4b7e-9c2d-6f8a5e3b1c0d</code>)</li>
</ul>
<h2 id="1-3-security">1.3. Security</h2>
<ul>
<li><strong>UUIDs are cryptographically secure</strong> identifiers that cannot be easily guessed or enumerated</li>
<li><strong>Each UUID is unique</strong> and serves as a secure reference to the merchant and loan application</li>
<li>Partners should <strong>validate these UUIDs</strong> via External API endpoints before processing</li>
<li>UUIDs are <strong>immutable</strong> for the lifetime of the entity</li>
<li><strong>Store loan_application_id and merchant_id</strong> in your system to handle cases where the user navigates to the redirect URL multiple times</li>
</ul>
<h2 id="1-4-example-redirect">1.4. Example Redirect</h2>
<pre><code>https://partner.com/loan-processing?merchant_id=f47ac10b<span class="hljs-string">-58</span>cc<span class="hljs-string">-4372</span>-a567<span class="hljs-string">-0</span>e02b2c3d479&amp;loan_application_id=e9b2d8c4<span class="hljs-string">-1</span>a3f<span class="hljs-string">-4</span>b7e<span class="hljs-string">-9</span>c2d<span class="hljs-string">-6</span>f8a5e3b1c0d
</code></pre><h1 id="2-get-auth-token-endpoint">2. Get auth token endpoint</h1>
<h2 id="2-1-overview">2.1. Overview</h2>
<p>Obtain OAuth 2.0 access token for External API authentication using Client Credentials grant type.</p>
<h2 id="2-2-endpoint">2.2. Endpoint</h2>
<pre><code>POST https:<span class="hljs-regexp">//</span>auth.platform.com<span class="hljs-regexp">/realms/</span>Integration<span class="hljs-regexp">/protocol/</span>openid-connect<span class="hljs-regexp">/token</span>
</code></pre><h2 id="2-3-request">2.3. Request</h2>
<p><strong>Headers:</strong></p>
<ul>
<li><code>Content-Type: application/x-www-form-urlencoded</code></li>
</ul>
<p><strong>Body parameters:</strong></p>
<ul>
<li><code>client_id</code> (required): Integration client ID, e.g. <code>a7f3c8b9-4d2e-4f1a-8c3b-9e5d7a2f4b6c</code>, will be provided by platform</li>
<li><code>client_secret</code> (required): Client secret, will be provided by platform</li>
<li><code>grant_type</code> (required): <code>client_credentials</code></li>
</ul>
<p><strong>Example:</strong></p>
<pre><code class="lang-bash">curl -X POST "https://auth.platform.com/realms/Integration/protocol/openid-connect/token" \
  -<span class="ruby">H <span class="hljs-string">"Content-Type: application/x-www-form-urlencoded"</span> \
</span>  -<span class="ruby">d <span class="hljs-string">"client_id=a7f3c8b9-4d2e-4f1a-8c3b-9e5d7a2f4b6c"</span> \
</span>  -<span class="ruby">d <span class="hljs-string">"client_secret=YOUR_CLIENT_SECRET"</span> \
</span>  -<span class="ruby">d <span class="hljs-string">"grant_type=client_credentials"</span></span>
</code></pre>
<h2 id="2-4-response">2.4. Response</h2>
<p><strong>Success (200 OK):</strong></p>
<pre><code class="lang-json">{
  <span class="hljs-attr">"access_token"</span>: <span class="hljs-string">"eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJ1Z2Y3ZzM2SVZ1WnpzaDNrUUc5Rlk4WVVhU3RpVUxudEQyOWszVVduTi1vIn0..."</span>,
  <span class="hljs-attr">"expires_in"</span>: <span class="hljs-number">300</span>,
  <span class="hljs-attr">"refresh_expires_in"</span>: <span class="hljs-number">0</span>,
  <span class="hljs-attr">"token_type"</span>: <span class="hljs-string">"Bearer"</span>,
  <span class="hljs-attr">"not-before-policy"</span>: <span class="hljs-number">0</span>,
  <span class="hljs-attr">"scope"</span>: <span class="hljs-string">""</span>
}
</code></pre>
<p><strong>Fields:</strong></p>
<ul>
<li><code>access_token</code>: JWT token for API requests</li>
<li><code>expires_in</code>: Expiration in seconds (default: 300)</li>
<li><code>token_type</code>: Always &quot;Bearer&quot;</li>
</ul>
<h2 id="2-5-using-token">2.5. Using Token</h2>
<p>Include in Authorization header:</p>
<pre><code><span class="hljs-symbol">Authorization:</span> <span class="hljs-class">Bearer </span>{access_token}
</code></pre><p><strong>Example:</strong></p>
<pre><code class="lang-bash"><span class="hljs-symbol">curl</span> -X <span class="hljs-meta">GET</span> <span class="hljs-string">"https://platform.com/api/external/v1/loan-applications"</span> \
  -H <span class="hljs-string">"Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJ1Z2Y3ZzM2SVZ1WnpzaDNrUUc5Rlk4WVVhU3RpVUxudEQyOWszVVduTi1vIn0..."</span>
</code></pre>
<h2 id="2-6-best-practices">2.6. Best Practices</h2>
<ul>
<li>Cache token until expiration</li>
<li>Refresh before expiration</li>
<li>Never expose client credentials in client-side code</li>
<li>Store credentials securely (environment variables, secure vault)</li>
</ul>
<h1 id="3-loan-applications-endpoints">3. Loan applications endpoints</h1>
<h2 id="3-1-get-loan-applications-list">3.1. Get Loan Applications List</h2>
<h3 id="3-1-1-overview">3.1.1. Overview</h3>
<p>Retrieve paginated list of loan applications with optional status filtering. Returns only loan applications assigned to the authenticated external client (partner).</p>
<h3 id="3-1-2-endpoint">3.1.2. Endpoint</h3>
<pre><code>GET https:<span class="hljs-regexp">//</span>platform.com<span class="hljs-regexp">/api/</span>external<span class="hljs-regexp">/v1/</span>loan-applications
</code></pre><h3 id="3-1-3-request">3.1.3. Request</h3>
<p><strong>Headers:</strong></p>
<ul>
<li><code>Authorization: Bearer {access_token}</code></li>
</ul>
<p><strong>Query Parameters:</strong></p>
<ul>
<li><code>page</code> (optional, Integer): Page number, zero-based (default: <code>0</code>)</li>
<li><code>size</code> (optional, Integer): Page size (default: <code>20</code>, max: <code>100</code>)</li>
<li><code>sort</code> (optional, String): Sort field and direction, e.g., <code>createdAt,DESC</code> (default: <code>createdAt,DESC</code>)</li>
<li><code>filter.statuses</code> (optional, String[]): Filter by loan application statuses. Multiple values supported</li>
</ul>
<p><strong>Available Statuses:</strong>
TBD (To Be Defined)</p>
<h3 id="3-1-4-example-request">3.1.4. Example Request</h3>
<pre><code class="lang-bash"><span class="hljs-symbol">curl</span> -X <span class="hljs-meta">GET</span> <span class="hljs-string">"https://platform.com/api/external/v1/loan-applications?page=0&amp;size=20&amp;filter.statuses=ASSIGNED&amp;filter.statuses=APPROVED"</span> \
  -H <span class="hljs-string">"Authorization: Bearer {access_token}"</span>
</code></pre>
<h3 id="3-1-5-response">3.1.5. Response</h3>
<p><strong>Success (200 OK):</strong></p>
<pre><code class="lang-json">{
  <span class="hljs-attr">"content"</span>: [
    {
      <span class="hljs-attr">"id"</span>: <span class="hljs-string">"e9b2d8c4-1a3f-4b7e-9c2d-6f8a5e3b1c0d"</span>,
      <span class="hljs-attr">"createdAt"</span>: <span class="hljs-string">"2024-01-15T10:30:00Z"</span>,
      <span class="hljs-attr">"number"</span>: <span class="hljs-string">"LA-2024-001"</span>,
      <span class="hljs-attr">"status"</span>: <span class="hljs-string">"ASSIGNED"</span>,
      <span class="hljs-attr">"amount"</span>: <span class="hljs-number">100000.00</span>,
      <span class="hljs-attr">"merchant"</span>: {
        <span class="hljs-attr">"id"</span>: <span class="hljs-string">"f47ac10b-58cc-4372-a567-0e02b2c3d479"</span>,
        <span class="hljs-attr">"createdAt"</span>: <span class="hljs-string">"2023-06-15T10:00:00Z"</span>,
        <span class="hljs-attr">"number"</span>: <span class="hljs-string">"M-123456"</span>,
        <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Merchant Business Name"</span>,
        <span class="hljs-attr">"joiningDate"</span>: <span class="hljs-string">"2023-06-15T10:00:00Z"</span>,
        <span class="hljs-attr">"tenureDays"</span>: <span class="hljs-number">500</span>,
        <span class="hljs-attr">"totalBranches"</span>: <span class="hljs-number">5</span>,
        <span class="hljs-attr">"lastOrderDate"</span>: <span class="hljs-string">"2024-12-18T15:30:00Z"</span>,
        <span class="hljs-attr">"metrics"</span>: {
          <span class="hljs-attr">"totalCustomers"</span>: <span class="hljs-number">1500</span>,
          <span class="hljs-attr">"totalOrders"</span>: <span class="hljs-number">3200</span>,
          <span class="hljs-attr">"totalAmount"</span>: <span class="hljs-number">125000.50</span>,
          <span class="hljs-attr">"aov"</span>: <span class="hljs-number">250.00</span>,
          <span class="hljs-attr">"oneTimeSharePct"</span>: <span class="hljs-number">35.5</span>,
          <span class="hljs-attr">"repeatSharePct"</span>: <span class="hljs-number">64.5</span>
        },
        <span class="hljs-attr">"sales"</span>: [
          {
            <span class="hljs-attr">"type"</span>: <span class="hljs-string">"MONTHLY"</span>,
            <span class="hljs-attr">"periodStart"</span>: <span class="hljs-string">"2024-01-01T00:00:00Z"</span>,
            <span class="hljs-attr">"periodEnd"</span>: <span class="hljs-string">"2024-01-31T23:59:59Z"</span>,
            <span class="hljs-attr">"totalCustomers"</span>: <span class="hljs-number">500</span>,
            <span class="hljs-attr">"totalOrders"</span>: <span class="hljs-number">1200</span>,
            <span class="hljs-attr">"totalAmount"</span>: <span class="hljs-number">45000.00</span>,
            <span class="hljs-attr">"aov"</span>: <span class="hljs-number">250.00</span>,
            <span class="hljs-attr">"oneTimeSharePct"</span>: <span class="hljs-number">38.0</span>,
            <span class="hljs-attr">"repeatSharePct"</span>: <span class="hljs-number">62.0</span>
          },
          {
            <span class="hljs-attr">"type"</span>: <span class="hljs-string">"WEEKLY"</span>,
            <span class="hljs-attr">"periodStart"</span>: <span class="hljs-string">"2024-01-01T00:00:00Z"</span>,
            <span class="hljs-attr">"periodEnd"</span>: <span class="hljs-string">"2024-01-07T23:59:59Z"</span>,
            <span class="hljs-attr">"totalCustomers"</span>: <span class="hljs-number">150</span>,
            <span class="hljs-attr">"totalOrders"</span>: <span class="hljs-number">350</span>,
            <span class="hljs-attr">"totalAmount"</span>: <span class="hljs-number">12000.00</span>,
            <span class="hljs-attr">"aov"</span>: <span class="hljs-number">250.00</span>,
            <span class="hljs-attr">"oneTimeSharePct"</span>: <span class="hljs-number">40.0</span>,
            <span class="hljs-attr">"repeatSharePct"</span>: <span class="hljs-number">60.0</span>
          }
        ]
      },
      <span class="hljs-attr">"phoneNumber"</span>: <span class="hljs-string">"+966501234567"</span>,
      <span class="hljs-attr">"secretKey"</span>: <span class="hljs-string">"a3f8c9b2-4d1e-4f2a-8c3b-9e5d7a2f4b6c"</span>,
      <span class="hljs-attr">"assignedPartner"</span>: {
        <span class="hljs-attr">"id"</span>: <span class="hljs-string">"d8c9f3b2-4a1e-4f2a-8c3b-9e5d7a2f4b6c"</span>,
        <span class="hljs-attr">"createdAt"</span>: <span class="hljs-string">"2023-01-10T08:00:00Z"</span>,
        <span class="hljs-attr">"number"</span>: <span class="hljs-string">"P-001"</span>,
        <span class="hljs-attr">"arabicName"</span>: <span class="hljs-string">"بنك الشريك"</span>,
        <span class="hljs-attr">"englishName"</span>: <span class="hljs-string">"Partner Bank"</span>,
        <span class="hljs-attr">"partnerType"</span>: <span class="hljs-string">"BANK"</span>,
        <span class="hljs-attr">"crNumber"</span>: <span class="hljs-string">"1234567890"</span>,
        <span class="hljs-attr">"licenseNumber"</span>: <span class="hljs-string">"LIC-123456"</span>,
        <span class="hljs-attr">"country"</span>: <span class="hljs-string">"SA"</span>,
        <span class="hljs-attr">"specialization"</span>: [<span class="hljs-string">"CONSUMER_FINANCE"</span>, <span class="hljs-string">"BUSINESS_LOANS"</span>],
        <span class="hljs-attr">"description"</span>: <span class="hljs-string">"Leading financial institution"</span>,
        <span class="hljs-attr">"erpCode"</span>: <span class="hljs-string">"ERP-001"</span>,
        <span class="hljs-attr">"jahezComissionType"</span>: <span class="hljs-string">"PERCENTAGE"</span>,
        <span class="hljs-attr">"jahezComissionAmount"</span>: <span class="hljs-number">0</span>,
        <span class="hljs-attr">"jahezComissionPct"</span>: <span class="hljs-number">2.5</span>,
        <span class="hljs-attr">"contact"</span>: {
          <span class="hljs-attr">"contactPersonInfo"</span>: <span class="hljs-string">"John Doe, Manager"</span>,
          <span class="hljs-attr">"supportEmail"</span>: <span class="hljs-string">"support@partner.com"</span>,
          <span class="hljs-attr">"supportPhone"</span>: <span class="hljs-string">"+966501234567"</span>
        },
        <span class="hljs-attr">"products"</span>: [
          {
            <span class="hljs-attr">"id"</span>: <span class="hljs-string">"c7b8a2f1-3d4e-4a5b-9c6d-8e7f5a4b3c2d"</span>,
            <span class="hljs-attr">"number"</span>: <span class="hljs-string">"PROD-001"</span>,
            <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Business Loan"</span>,
            <span class="hljs-attr">"description"</span>: <span class="hljs-string">"Flexible business financing"</span>,
            <span class="hljs-attr">"offeringTypes"</span>: [<span class="hljs-string">"LOAN"</span>, <span class="hljs-string">"CREDIT_LINE"</span>],
            <span class="hljs-attr">"minAmount"</span>: <span class="hljs-number">10000.00</span>,
            <span class="hljs-attr">"maxAmount"</span>: <span class="hljs-number">500000.00</span>,
            <span class="hljs-attr">"minTerms"</span>: <span class="hljs-number">6</span>,
            <span class="hljs-attr">"maxTerms"</span>: <span class="hljs-number">36</span>,
            <span class="hljs-attr">"minMurabahaRatePct"</span>: <span class="hljs-number">5.0</span>,
            <span class="hljs-attr">"maxMurabahaRatePct"</span>: <span class="hljs-number">12.0</span>,
            <span class="hljs-attr">"partnerSystemLink"</span>: <span class="hljs-string">"https://partner.com/loan-processing"</span>
          }
        ]
      },
      <span class="hljs-attr">"product"</span>: {
        <span class="hljs-attr">"id"</span>: <span class="hljs-string">"c7b8a2f1-3d4e-4a5b-9c6d-8e7f5a4b3c2d"</span>,
        <span class="hljs-attr">"number"</span>: <span class="hljs-string">"PROD-001"</span>,
        <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Business Loan"</span>,
        <span class="hljs-attr">"description"</span>: <span class="hljs-string">"Flexible business financing"</span>,
        <span class="hljs-attr">"offeringTypes"</span>: [<span class="hljs-string">"LOAN"</span>, <span class="hljs-string">"CREDIT_LINE"</span>],
        <span class="hljs-attr">"minAmount"</span>: <span class="hljs-number">10000.00</span>,
        <span class="hljs-attr">"maxAmount"</span>: <span class="hljs-number">500000.00</span>,
        <span class="hljs-attr">"minTerms"</span>: <span class="hljs-number">6</span>,
        <span class="hljs-attr">"maxTerms"</span>: <span class="hljs-number">36</span>,
        <span class="hljs-attr">"minMurabahaRatePct"</span>: <span class="hljs-number">5.0</span>,
        <span class="hljs-attr">"maxMurabahaRatePct"</span>: <span class="hljs-number">12.0</span>,
        <span class="hljs-attr">"partnerSystemLink"</span>: <span class="hljs-string">"https://partner.com/loan-processing"</span>
      },
      <span class="hljs-attr">"declineInfo"</span>: [],
      <span class="hljs-attr">"initialOffer"</span>: <span class="hljs-literal">null</span>
    }
  ],
  <span class="hljs-attr">"pageable"</span>: {
    <span class="hljs-attr">"pageNumber"</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">"pageSize"</span>: <span class="hljs-number">20</span>,
    <span class="hljs-attr">"sort"</span>: {
      <span class="hljs-attr">"sorted"</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">"unsorted"</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">"empty"</span>: <span class="hljs-literal">false</span>
    },
    <span class="hljs-attr">"offset"</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">"paged"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">"unpaged"</span>: <span class="hljs-literal">false</span>
  },
  <span class="hljs-attr">"totalElements"</span>: <span class="hljs-number">150</span>,
  <span class="hljs-attr">"totalPages"</span>: <span class="hljs-number">8</span>,
  <span class="hljs-attr">"size"</span>: <span class="hljs-number">20</span>,
  <span class="hljs-attr">"number"</span>: <span class="hljs-number">0</span>,
  <span class="hljs-attr">"first"</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">"last"</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">"numberOfElements"</span>: <span class="hljs-number">20</span>,
  <span class="hljs-attr">"empty"</span>: <span class="hljs-literal">false</span>
}
</code></pre>
<h3 id="3-1-6-response-fields">3.1.6. Response Fields</h3>
<p><strong>Root Level:</strong></p>
<ul>
<li><code>content</code>: Array of loan application objects</li>
<li><code>totalElements</code>: Total number of matching loan applications</li>
<li><code>totalPages</code>: Total number of pages</li>
<li><code>size</code>: Page size</li>
<li><code>number</code>: Current page number (zero-based)</li>
<li><code>first</code>: True if this is the first page</li>
<li><code>last</code>: True if this is the last page</li>
</ul>
<p><strong>LoanApplicationExternalDto:</strong></p>
<ul>
<li><code>id</code> (UUID): Unique loan application identifier</li>
<li><code>createdAt</code> (ISO 8601): Creation timestamp</li>
<li><code>number</code> (String): Human-readable loan application number</li>
<li><code>status</code> (String): Current application status</li>
<li><code>amount</code> (Decimal): Requested loan amount</li>
<li><code>merchant</code> (MerchantExternalDto): Complete merchant information</li>
<li><code>phoneNumber</code> (String): Customer contact phone number</li>
<li><code>secretKey</code> (UUID): Secure key for loan application</li>
<li><code>assignedPartner</code> (PartnerExternalDto): Complete partner information</li>
<li><code>product</code> (ProductExternalDto): Product selected for this loan application</li>
<li><code>declineInfo</code> (Array): Decline history (if applicable)</li>
<li><code>initialOffer</code> (Object): Initial offer details (if available)</li>
</ul>
<p><strong>MerchantExternalDto:</strong></p>
<ul>
<li><code>id</code> (UUID): Unique merchant identifier</li>
<li><code>createdAt</code> (ISO 8601): Merchant creation timestamp</li>
<li><code>number</code> (String): Merchant reference number</li>
<li><code>name</code> (String): Business name</li>
<li><code>joiningDate</code> (ISO 8601): Date when merchant joined platform</li>
<li><code>tenureDays</code> (Long): Days since joining</li>
<li><code>totalBranches</code> (Long): Number of business branches</li>
<li><code>lastOrderDate</code> (ISO 8601): Last order timestamp</li>
<li><code>metrics</code> (MetricsExternal): Aggregate business metrics</li>
<li><code>sales</code> (SalesExternal[]): Historical sales data</li>
</ul>
<p><strong>MetricsExternal:</strong></p>
<ul>
<li><code>totalCustomers</code> (Long): Total unique customers</li>
<li><code>totalOrders</code> (Long): Total number of orders</li>
<li><code>totalAmount</code> (Decimal): Total sales amount</li>
<li><code>aov</code> (Decimal): Average order value</li>
<li><code>oneTimeSharePct</code> (Decimal): One-time customer percentage</li>
<li><code>repeatSharePct</code> (Decimal): Repeat customer percentage</li>
</ul>
<p><strong>SalesExternal:</strong></p>
<ul>
<li><code>type</code> (String): Period type (MONTHLY, WEEKLY, YEARLY)</li>
<li><code>periodStart</code> (ISO 8601): Period start date</li>
<li><code>periodEnd</code> (ISO 8601): Period end date</li>
<li><code>totalCustomers</code> (Long): Customers in period</li>
<li><code>totalOrders</code> (Long): Orders in period</li>
<li><code>totalAmount</code> (Decimal): Sales amount in period</li>
<li><code>aov</code> (Decimal): Average order value in period</li>
<li><code>oneTimeSharePct</code> (Decimal): One-time customers percentage</li>
<li><code>repeatSharePct</code> (Decimal): Repeat customers percentage</li>
</ul>
<p><strong>PartnerExternalDto:</strong></p>
<ul>
<li><code>id</code> (UUID): Unique partner identifier</li>
<li><code>createdAt</code> (ISO 8601): Partner creation timestamp</li>
<li><code>number</code> (String): Partner reference number</li>
<li><code>arabicName</code> (String): Partner name in Arabic</li>
<li><code>englishName</code> (String): Partner name in English</li>
<li><code>partnerType</code> (String): Type of partner (BANK, NBFI, etc.)</li>
<li><code>crNumber</code> (String): Commercial registration number</li>
<li><code>licenseNumber</code> (String): License number</li>
<li><code>country</code> (String): Country code (ISO 3166-1 alpha-2)</li>
<li><code>specialization</code> (String[]): Areas of specialization</li>
<li><code>description</code> (String): Partner description</li>
<li><code>erpCode</code> (String): ERP system code</li>
<li><code>jahezComissionType</code> (String): Commission type (PERCENTAGE, FIXED)</li>
<li><code>jahezComissionAmount</code> (Decimal): Fixed commission amount</li>
<li><code>jahezComissionPct</code> (Decimal): Percentage commission</li>
<li><code>contact</code> (PartnerExternalContact): Contact information</li>
<li><code>products</code> (ProductExternalDto[]): Available products</li>
</ul>
<p><strong>ProductExternalDto:</strong></p>
<ul>
<li><code>id</code> (UUID): Unique product identifier</li>
<li><code>number</code> (String): Product reference number</li>
<li><code>name</code> (String): Product name</li>
<li><code>description</code> (String): Product description</li>
<li><code>offeringTypes</code> (String[]): Types of offerings</li>
<li><code>minAmount</code> (Decimal): Minimum loan amount</li>
<li><code>maxAmount</code> (Decimal): Maximum loan amount</li>
<li><code>minTerms</code> (Decimal): Minimum loan term (months)</li>
<li><code>maxTerms</code> (Decimal): Maximum loan term (months)</li>
<li><code>minMurabahaRatePct</code> (Decimal): Minimum murabaha rate</li>
<li><code>maxMurabahaRatePct</code> (Decimal): Maximum murabaha rate</li>
<li><code>partnerSystemLink</code> (String): URL to partner&#39;s system</li>
</ul>
<h2 id="3-2-get-loan-application-by-id">3.2. Get Loan Application by ID</h2>
<h3 id="3-2-1-overview">3.2.1. Overview</h3>
<p>Retrieve a single loan application by its UUID. Returns the loan application only if it is assigned to the authenticated external client (partner).</p>
<h3 id="3-2-2-endpoint">3.2.2. Endpoint</h3>
<pre><code>GET https:<span class="hljs-regexp">//</span>platform.com<span class="hljs-regexp">/api/</span>external<span class="hljs-regexp">/v1/</span>loan-applications<span class="hljs-regexp">/{id}</span>
</code></pre><h3 id="3-2-3-request">3.2.3. Request</h3>
<p><strong>Headers:</strong></p>
<ul>
<li><code>Authorization: Bearer {access_token}</code></li>
</ul>
<p><strong>Path Parameters:</strong></p>
<ul>
<li><code>id</code> (required, UUID): Loan application unique identifier</li>
</ul>
<h3 id="3-2-4-example-request">3.2.4. Example Request</h3>
<pre><code class="lang-bash">curl -X GET "https://platform.com/api/external/v1/loan-applications/e9b2d8c4<span class="hljs-string">-1</span>a3f<span class="hljs-string">-4</span>b7e<span class="hljs-string">-9</span>c2d<span class="hljs-string">-6</span>f8a5e3b1c0d" \
  -H "Authorization: Bearer {access_token}"
</code></pre>
<h3 id="3-2-5-response">3.2.5. Response</h3>
<p><strong>Success (200 OK):</strong></p>
<pre><code class="lang-json">{
  <span class="hljs-attr">"id"</span>: <span class="hljs-string">"e9b2d8c4-1a3f-4b7e-9c2d-6f8a5e3b1c0d"</span>,
  <span class="hljs-attr">"createdAt"</span>: <span class="hljs-string">"2024-01-15T10:30:00Z"</span>,
  <span class="hljs-attr">"number"</span>: <span class="hljs-string">"LA-2024-001"</span>,
  <span class="hljs-attr">"status"</span>: <span class="hljs-string">"ASSIGNED"</span>,
  <span class="hljs-attr">"amount"</span>: <span class="hljs-number">100000.00</span>,
  <span class="hljs-attr">"merchant"</span>: {
    <span class="hljs-attr">"id"</span>: <span class="hljs-string">"f47ac10b-58cc-4372-a567-0e02b2c3d479"</span>,
    <span class="hljs-attr">"createdAt"</span>: <span class="hljs-string">"2023-06-15T10:00:00Z"</span>,
    <span class="hljs-attr">"number"</span>: <span class="hljs-string">"M-123456"</span>,
    <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Merchant Business Name"</span>,
    <span class="hljs-attr">"joiningDate"</span>: <span class="hljs-string">"2023-06-15T10:00:00Z"</span>,
    <span class="hljs-attr">"tenureDays"</span>: <span class="hljs-number">500</span>,
    <span class="hljs-attr">"totalBranches"</span>: <span class="hljs-number">5</span>,
    <span class="hljs-attr">"lastOrderDate"</span>: <span class="hljs-string">"2024-12-18T15:30:00Z"</span>,
    <span class="hljs-attr">"metrics"</span>: {
      <span class="hljs-attr">"totalCustomers"</span>: <span class="hljs-number">1500</span>,
      <span class="hljs-attr">"totalOrders"</span>: <span class="hljs-number">3200</span>,
      <span class="hljs-attr">"totalAmount"</span>: <span class="hljs-number">125000.50</span>,
      <span class="hljs-attr">"aov"</span>: <span class="hljs-number">250.00</span>,
      <span class="hljs-attr">"oneTimeSharePct"</span>: <span class="hljs-number">35.5</span>,
      <span class="hljs-attr">"repeatSharePct"</span>: <span class="hljs-number">64.5</span>
    },
    <span class="hljs-attr">"sales"</span>: [
      {
        <span class="hljs-attr">"type"</span>: <span class="hljs-string">"MONTHLY"</span>,
        <span class="hljs-attr">"periodStart"</span>: <span class="hljs-string">"2024-01-01T00:00:00Z"</span>,
        <span class="hljs-attr">"periodEnd"</span>: <span class="hljs-string">"2024-01-31T23:59:59Z"</span>,
        <span class="hljs-attr">"totalCustomers"</span>: <span class="hljs-number">500</span>,
        <span class="hljs-attr">"totalOrders"</span>: <span class="hljs-number">1200</span>,
        <span class="hljs-attr">"totalAmount"</span>: <span class="hljs-number">45000.00</span>,
        <span class="hljs-attr">"aov"</span>: <span class="hljs-number">250.00</span>,
        <span class="hljs-attr">"oneTimeSharePct"</span>: <span class="hljs-number">38.0</span>,
        <span class="hljs-attr">"repeatSharePct"</span>: <span class="hljs-number">62.0</span>
      }
    ]
  },
  <span class="hljs-attr">"phoneNumber"</span>: <span class="hljs-string">"+966501234567"</span>,
  <span class="hljs-attr">"secretKey"</span>: <span class="hljs-string">"a3f8c9b2-4d1e-4f2a-8c3b-9e5d7a2f4b6c"</span>,
  <span class="hljs-attr">"assignedPartner"</span>: {
    <span class="hljs-attr">"id"</span>: <span class="hljs-string">"d8c9f3b2-4a1e-4f2a-8c3b-9e5d7a2f4b6c"</span>,
    <span class="hljs-attr">"createdAt"</span>: <span class="hljs-string">"2023-01-10T08:00:00Z"</span>,
    <span class="hljs-attr">"number"</span>: <span class="hljs-string">"P-001"</span>,
    <span class="hljs-attr">"arabicName"</span>: <span class="hljs-string">"بنك الشريك"</span>,
    <span class="hljs-attr">"englishName"</span>: <span class="hljs-string">"Partner Bank"</span>,
    <span class="hljs-attr">"partnerType"</span>: <span class="hljs-string">"BANK"</span>,
    <span class="hljs-attr">"crNumber"</span>: <span class="hljs-string">"1234567890"</span>,
    <span class="hljs-attr">"licenseNumber"</span>: <span class="hljs-string">"LIC-123456"</span>,
    <span class="hljs-attr">"country"</span>: <span class="hljs-string">"SA"</span>,
    <span class="hljs-attr">"specialization"</span>: [<span class="hljs-string">"CONSUMER_FINANCE"</span>, <span class="hljs-string">"BUSINESS_LOANS"</span>],
    <span class="hljs-attr">"description"</span>: <span class="hljs-string">"Leading financial institution"</span>,
    <span class="hljs-attr">"erpCode"</span>: <span class="hljs-string">"ERP-001"</span>,
    <span class="hljs-attr">"jahezComissionType"</span>: <span class="hljs-string">"PERCENTAGE"</span>,
    <span class="hljs-attr">"jahezComissionAmount"</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">"jahezComissionPct"</span>: <span class="hljs-number">2.5</span>,
    <span class="hljs-attr">"contact"</span>: {
      <span class="hljs-attr">"contactPersonInfo"</span>: <span class="hljs-string">"John Doe, Manager"</span>,
      <span class="hljs-attr">"supportEmail"</span>: <span class="hljs-string">"support@partner.com"</span>,
      <span class="hljs-attr">"supportPhone"</span>: <span class="hljs-string">"+966501234567"</span>
    },
    <span class="hljs-attr">"products"</span>: [
      {
        <span class="hljs-attr">"id"</span>: <span class="hljs-string">"c7b8a2f1-3d4e-4a5b-9c6d-8e7f5a4b3c2d"</span>,
        <span class="hljs-attr">"number"</span>: <span class="hljs-string">"PROD-001"</span>,
        <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Business Loan"</span>,
        <span class="hljs-attr">"description"</span>: <span class="hljs-string">"Flexible business financing"</span>,
        <span class="hljs-attr">"offeringTypes"</span>: [<span class="hljs-string">"LOAN"</span>, <span class="hljs-string">"CREDIT_LINE"</span>],
        <span class="hljs-attr">"minAmount"</span>: <span class="hljs-number">10000.00</span>,
        <span class="hljs-attr">"maxAmount"</span>: <span class="hljs-number">500000.00</span>,
        <span class="hljs-attr">"minTerms"</span>: <span class="hljs-number">6</span>,
        <span class="hljs-attr">"maxTerms"</span>: <span class="hljs-number">36</span>,
        <span class="hljs-attr">"minMurabahaRatePct"</span>: <span class="hljs-number">5.0</span>,
        <span class="hljs-attr">"maxMurabahaRatePct"</span>: <span class="hljs-number">12.0</span>,
        <span class="hljs-attr">"partnerSystemLink"</span>: <span class="hljs-string">"https://partner.com/loan-processing"</span>
      }
    ]
  },
  <span class="hljs-attr">"product"</span>: {
    <span class="hljs-attr">"id"</span>: <span class="hljs-string">"c7b8a2f1-3d4e-4a5b-9c6d-8e7f5a4b3c2d"</span>,
    <span class="hljs-attr">"number"</span>: <span class="hljs-string">"PROD-001"</span>,
    <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Business Loan"</span>,
    <span class="hljs-attr">"description"</span>: <span class="hljs-string">"Flexible business financing"</span>,
    <span class="hljs-attr">"offeringTypes"</span>: [<span class="hljs-string">"LOAN"</span>, <span class="hljs-string">"CREDIT_LINE"</span>],
    <span class="hljs-attr">"minAmount"</span>: <span class="hljs-number">10000.00</span>,
    <span class="hljs-attr">"maxAmount"</span>: <span class="hljs-number">500000.00</span>,
    <span class="hljs-attr">"minTerms"</span>: <span class="hljs-number">6</span>,
    <span class="hljs-attr">"maxTerms"</span>: <span class="hljs-number">36</span>,
    <span class="hljs-attr">"minMurabahaRatePct"</span>: <span class="hljs-number">5.0</span>,
    <span class="hljs-attr">"maxMurabahaRatePct"</span>: <span class="hljs-number">12.0</span>,
    <span class="hljs-attr">"partnerSystemLink"</span>: <span class="hljs-string">"https://partner.com/loan-processing"</span>
  },
  <span class="hljs-attr">"declineInfo"</span>: [],
  <span class="hljs-attr">"initialOffer"</span>: <span class="hljs-literal">null</span>
}
</code></pre>
<p><strong>Error Responses:</strong></p>
<p><strong>401 Unauthorized:</strong></p>
<pre><code class="lang-json">{
  <span class="hljs-attr">"status"</span>: <span class="hljs-number">401</span>,
  <span class="hljs-attr">"error"</span>: <span class="hljs-string">"Unauthorized"</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">"Invalid or expired access token"</span>
}
</code></pre>
<p><strong>403 Forbidden:</strong></p>
<pre><code class="lang-json">{
  <span class="hljs-attr">"status"</span>: <span class="hljs-number">403</span>,
  <span class="hljs-attr">"error"</span>: <span class="hljs-string">"Forbidden"</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">"Access denied"</span>
}
</code></pre>
<p><strong>404 Not Found:</strong></p>
<pre><code class="lang-json">{
  <span class="hljs-attr">"status"</span>: <span class="hljs-number">404</span>,
  <span class="hljs-attr">"error"</span>: <span class="hljs-string">"Not Found"</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">"Loan application not found or not assigned to your partner"</span>
}
</code></pre>
<h3 id="3-2-6-use-cases">3.2.6. Use Cases</h3>
<p><strong>Validate Redirect Parameters:</strong>
When a user is redirected from our platform with <code>merchant_id</code> and <code>loan_application_id</code> parameters, use this endpoint to:</p>
<ol>
<li>Validate the UUIDs</li>
<li>Retrieve complete merchant information</li>
<li>Retrieve loan application details</li>
<li>Begin your internal processing</li>
</ol>
<p><strong>Example:</strong></p>
<pre><code class="lang-bash"># User redirected with: 
# https://partner.com/process?merchant_id=f47ac10b<span class="hljs-string">-58</span>cc<span class="hljs-string">-4372</span>-a567<span class="hljs-string">-0</span>e02b2c3d479&amp;loan_application_id=e9b2d8c4<span class="hljs-string">-1</span>a3f<span class="hljs-string">-4</span>b7e<span class="hljs-string">-9</span>c2d<span class="hljs-string">-6</span>f8a5e3b1c0d

# Validate and fetch details:
curl -X GET "https://platform.com/api/external/v1/loan-applications/e9b2d8c4<span class="hljs-string">-1</span>a3f<span class="hljs-string">-4</span>b7e<span class="hljs-string">-9</span>c2d<span class="hljs-string">-6</span>f8a5e3b1c0d" \
  -H "Authorization: Bearer {access_token}"

# Response will include merchant with id: f47ac10b<span class="hljs-string">-58</span>cc<span class="hljs-string">-4372</span>-a567<span class="hljs-string">-0</span>e02b2c3d479
</code></pre>
<h2 id="3-3-authentication">3.3. Authentication</h2>
<p>All endpoints require Bearer token authentication. Include the access token in the Authorization header:</p>
<pre><code><span class="hljs-symbol">Authorization:</span> <span class="hljs-class">Bearer </span>{access_token}
</code></pre><p>Obtain the access token using the token endpoint (see section 1).</p>
<h1 id="4-decision-endpoints">4. Decision endpoints</h1>
<p>TBD (To Be Defined)</p>
<h2 id="4-1-error-handling">4.1. Error Handling</h2>
<p>All error responses follow standard HTTP status codes:</p>
<ul>
<li><strong>404 Not Found</strong>: When requesting a specific loan application by ID that doesn&#39;t exist or is not assigned to your partner</li>
<li><strong>401 Unauthorized</strong>: Invalid or expired access token</li>
<li><strong>403 Forbidden</strong>: Access denied</li>
</ul>
<p>When requesting the loan applications list, non-existent or inaccessible applications will return an empty <code>content</code> array rather than an error.</p>
</body></html>